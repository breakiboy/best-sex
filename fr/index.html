<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Best-Sex.ch - La meilleure plateforme pour les contacts érotiques en Suisse. Trouvez des rencontres discrètes et de vraies connexions.">
  <meta name="keywords" content="Sexe, Érotique, Contacts, Suisse, Dating, Escort, Discret">
  <title>Best-Sex.ch - Contacts Érotiques en Suisse</title>

  <!-- Open Graph -->
  <meta property="og:title" content="Best-Sex.ch - Contacts Érotiques">
  <meta property="og:description" content="La meilleure plateforme pour les contacts érotiques en Suisse.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://best-sex.ch/fr/">
  <meta property="og:locale" content="fr_CH">

  <!-- Alternate languages -->
  <link rel="alternate" hreflang="de" href="https://best-sex.ch/de/">
  <link rel="alternate" hreflang="en" href="https://best-sex.ch/en/">
  <link rel="alternate" hreflang="fr" href="https://best-sex.ch/fr/">
  <link rel="alternate" hreflang="it" href="https://best-sex.ch/it/">
  <link rel="alternate" hreflang="x-default" href="https://best-sex.ch/">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="https://6love.ch/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://6love.ch/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://6love.ch/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <!-- Language Switcher -->
  <div class="lang-switcher">
    <a href="/de/" class="lang-btn">DE</a>
    <a href="/en/" class="lang-btn">EN</a>
    <a href="/fr/" class="lang-btn active">FR</a>
    <a href="/it/" class="lang-btn">IT</a>
  </div>

  <!-- Hero Section -->
  <main class="hero">
    <div class="hero-bg"></div>
    <div class="hero-content">
      <div class="logo">
        <span class="logo-icon">&#128293;</span>
        <span class="logo-text">Best-Sex</span>
      </div>

      <h1>Trouvez votre <span class="highlight">Aventure</span></h1>

      <p class="subtitle">
        La plateforme suisse pour les contacts érotiques.<br>
        Discret. Sûr. Excitant.
      </p>

      <div class="features">
        <div class="feature">
          <span class="feature-icon">&#128274;</span>
          <span>100% Discret</span>
        </div>
        <div class="feature">
          <span class="feature-icon">&#127464;&#127469;</span>
          <span>Made in Switzerland</span>
        </div>
        <div class="feature">
          <span class="feature-icon">&#9989;</span>
          <span>Profils Vérifiés</span>
        </div>
      </div>

      <a href="https://6love.ch/fr" class="cta-button">
        <span>Découvrir maintenant</span>
        <span class="arrow">&#8594;</span>
      </a>

      <p class="hint">Inscription gratuite sur 6love.ch</p>
    </div>

    <!-- Floating Elements Animation -->
    <div class="flames">
      <div class="flame">&#128293;</div>
      <div class="flame">&#128293;</div>
      <div class="flame">&#128293;</div>
      <div class="flame">&#128293;</div>
      <div class="flame">&#128293;</div>
    </div>
  </main>

  <!-- Premium Ads Section -->
  <section class="content-section">
    <h2 class="section-title">Annonces Premium</h2>
    <div class="cards-container" id="premium-ads-container">
      <div class="loading-spinner"></div>
    </div>
    <div class="section-cta">
      <a href="https://6love.ch/fr/ads" class="cta-button-small">Voir toutes les annonces →</a>
    </div>
  </section>

  <!-- SixAds Banner Section -->
  <section class="sixads-section">
    <h2 class="sixads-title">Découvrez plus</h2>
    <div class="sixads-container" id="sixads-container"></div>
  </section>

  <!-- Latest Blog Posts Section -->
  <section class="content-section">
    <h2 class="section-title">Derniers Articles</h2>
    <div class="cards-container" id="latest-blogs-container">
      <div class="loading-spinner"></div>
    </div>
  </section>

  <!-- Most Viewed Blog Posts Section -->
  <section class="content-section">
    <h2 class="section-title">Articles Populaires</h2>
    <div class="cards-container" id="popular-blogs-container">
      <div class="loading-spinner"></div>
    </div>
    <div class="section-cta">
      <a href="https://6love.ch/fr/blog" class="cta-button-small">Lire tous les articles →</a>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="footer-links">
      <a href="https://6love.ch/fr/privacy">Confidentialité</a>
      <span class="divider">|</span>
      <a href="https://6love.ch/fr/terms">Conditions</a>
      <span class="divider">|</span>
      <a href="https://6love.ch/fr/about">À propos</a>
    </div>
    <p class="copyright">
      &copy; 2026 Best-Sex.ch - Powered by
      <a href="https://6love.ch">6love.ch</a>
    </p>
  </footer>

  <script>
    const API_BASE = 'https://backend.6love.ch';
    const LANG = 'fr';

    function getTranslation(translations, lang) {
      if (!translations) return null;
      return translations.find(t => t.language === lang) || translations.find(t => t.language === 'de') || translations[0];
    }

    async function fetchPremiumAds() {
      const container = document.getElementById('premium-ads-container');
      try {
        const response = await fetch(`${API_BASE}/api/listings/platin/`);
        if (!response.ok) throw new Error('Erreur de chargement');
        const ads = await response.json();

        container.innerHTML = '';

        ads.forEach(ad => {
          const imageUrl = ad.gallery_listview?.image?.md
            ? `${API_BASE}/${ad.gallery_listview.image.md}`
            : 'https://6love.ch/assets/images/6lovepink.svg';

          const trans = getTranslation(ad.translations, LANG);
          const title = trans?.translated_title || ad.title;
          const slug = trans?.translated_slug || ad.slug;

          const card = document.createElement('div');
          card.className = 'content-card';
          card.innerHTML = `
            <a href="https://6love.ch/${LANG}/ads/detail/${ad.id}/${slug}" class="card-link">
              <div class="card-image-container">
                <img src="${imageUrl}" alt="${ad.staff?.nickname || 'Annonce'}" class="card-image" loading="lazy">
                <div class="card-badge" style="background: ${ad.subscription?.color || '#e91e63'}">
                  <svg viewBox="0 0 65 65" width="24" height="24">
                    <path fill="white" d="M 41.757812 38.472656 C 41.757812 38.472656 53.4375 30.675781 51.332031 13.230469 C 51.332031 13.230469 35.941406 15.144531 34.042969 37.761719 C 32.847656 7.246094 12.96875 7.234375 12.96875 7.234375 C 10.859375 24.679688 26.296875 38.480469 26.296875 38.480469 C 12.96875 42.046875 16.15625 57.777344 16.15625 57.777344 L 51.894531 57.777344 C 51.894531 57.777344 55.089844 42.039062 41.757812 38.472656 Z"/>
                  </svg>
                </div>
              </div>
              <div class="card-content">
                <h3 class="card-title">${title}</h3>
                <div class="card-tags">
                  ${ad.address?.city ? `<span class="card-tag">${ad.address.city}</span>` : ''}
                  ${ad.category?.name ? `<span class="card-tag">${ad.category.name}</span>` : ''}
                </div>
              </div>
            </a>
          `;
          container.appendChild(card);
        });
      } catch (error) {
        console.error('Erreur:', error);
        container.innerHTML = '<p class="error-message">Impossible de charger les annonces</p>';
      }
    }

    async function fetchBlogs(endpoint, containerId) {
      const container = document.getElementById(containerId);
      try {
        const response = await fetch(`${API_BASE}/api/blogs/${endpoint}/`);
        if (!response.ok) throw new Error('Erreur de chargement');
        const blogs = await response.json();

        container.innerHTML = '';

        blogs.forEach(blog => {
          const imageUrl = blog.gallery_listview?.image?.card
            ? `${API_BASE}/${blog.gallery_listview.image.card}`
            : 'https://6love.ch/assets/images/6lovepink.svg';

          const trans = getTranslation(blog.translations, LANG);
          const title = trans?.translated_title || blog.title;
          const slug = trans?.translated_slug || blog.slug;
          const date = new Date(blog.created_at).toLocaleDateString('fr-CH');

          const card = document.createElement('div');
          card.className = 'content-card';
          card.innerHTML = `
            <a href="https://6love.ch/${LANG}/blog/post/${blog.id}/${slug}" class="card-link">
              <div class="card-image-container">
                <img src="${imageUrl}" alt="${title}" class="card-image" loading="lazy">
                ${blog.is_featured ? '<div class="card-featured">&#128293;</div>' : ''}
              </div>
              <div class="card-content">
                <div class="card-meta">
                  <span>&#128065; ${formatNumber(blog.views || 0)}</span>
                  <span>${date}</span>
                </div>
                <h3 class="card-title">${title}</h3>
                <div class="card-tags">
                  ${blog.category?.name ? `<span class="card-tag">${blog.category.name}</span>` : ''}
                </div>
              </div>
            </a>
          `;
          container.appendChild(card);
        });
      } catch (error) {
        console.error('Erreur:', error);
        container.innerHTML = '<p class="error-message">Impossible de charger les articles</p>';
      }
    }

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
      return num.toString();
    }

    async function fetchSingleBanner() {
      const randomParam = `nocache=${Math.random()}`;
      const response = await fetch(`${API_BASE}/api/banners-with-impressions/?limit=1&${randomParam}`, {
        cache: 'no-store'
      });
      if (!response.ok) throw new Error(`Erreur: ${response.statusText}`);
      return await response.json();
    }

    async function fetchBanners() {
      const screenWidth = window.innerWidth;
      let bannerLimit = screenWidth <= 768 ? 1 : screenWidth <= 1024 ? 2 : 3;

      const container = document.getElementById("sixads-container");
      container.innerHTML = '';

      for (let i = 0; i < bannerLimit; i++) {
        try {
          const bannerData = await fetchSingleBanner();
          const banner = bannerData[0];

          const bannerDiv = document.createElement('div');
          bannerDiv.className = 'banner-section';
          bannerDiv.innerHTML = `
            <a href="${banner.link}" target="_blank" rel="nofollow noopener">
              <img src="${banner.image.full}" alt="${banner.text}" class="banner-img" />
            </a>
            <div class="sixads-link">
              <a href="https://6love.ch/${LANG}/pricing">SixAds</a>
            </div>
          `;
          container.appendChild(bannerDiv);
        } catch (error) {
          console.error("Erreur de chargement:", error);
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      fetchPremiumAds();
      fetchBlogs('latest', 'latest-blogs-container');
      fetchBlogs('most-viewed', 'popular-blogs-container');
      fetchBanners();
    });

    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(() => {
        fetchPremiumAds();
        fetchBlogs('latest', 'latest-blogs-container');
        fetchBlogs('most-viewed', 'popular-blogs-container');
        fetchBanners();
      }, 250);
    });
  </script>
</body>
</html>
